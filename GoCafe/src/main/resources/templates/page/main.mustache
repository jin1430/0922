{{>layout/header}}

<main class="cg-container">

    <!-- ✅ 히어로 섹션만 연민트 배경 -->
    <section class="cg-hero cg-hero--one">
        <div>
            <h1 class="cg-title">당신의 무드를 담은 카페,<br/>오늘은 어디일까요?</h1>

            <form class="cg-search" method="get" action="/search">
                <input class="cg-input" type="text" name="q"
                       placeholder="지대, 키워드 (감성, 브런치, 보드게임, 라떼 맛집 등)"/>
                <button class="cg-btn" type="submit">검색</button>
            </form>

            <div class="cg-chips">
                {{#cafeTags}}
                    <button class="cg-chip" data-category="{{tagCategoryCode}}" data-tag="{{tagCode}}">
                        {{tagCode}}
                    </button>
                {{/cafeTags}}
            </div>
        </div>
    </section>

    <!-- 지금 뜨는 카페 -->
    <section class="cg-section">
        <div class="cg-section__head">
            <h3>지금 뜨는 카페</h3>
            <a class="cg-link" href="/cafes">모두 보기</a>
        </div>

        <ul class="cg-card-grid">
            {{#trendingCafes}}
                <li class="cg-card">
                    <a class="cg-card__link" href="/cafes/{{cafeId}}">
                        <div class="cg-card__imgwrap">
                            <img class="cg-card__img" src="{{cafePhoto}}" alt="{{cafeName}}"
                                 onerror="this.style.display='none'; this.parentElement.classList.add('cg-noimg');"/>
                        </div>
                        <div class="cg-card__body">
                            <div class="cg-card__title">{{cafeName}}</div>
                            <div class="cg-card__meta">조회수 {{cafeViews}}</div>
                        </div>
                    </a>
                </li>
            {{/trendingCafes}}
            {{^trendingCafes}}<li class="cg-empty">표시할 카페가 아직 없어요.</li>{{/trendingCafes}}
        </ul>
    </section>

    <!-- 지금 올라온 후기 -->
    <section class="cg-section">
        <div class="cg-section__head"><h3>최근 올라온 후기</h3></div>
        <ul class="cg-feed">
            {{#recentReviews}}
                <li class="cg-feed__item">
                    <p class="cg-feed__text">{{reviewContent}}</p>
                    <div class="cg-feed__meta">
                        <span>{{reviewDate}}</span>
                        <span>좋아요 {{reviewGood}} / 아쉬워요 {{reviewBad}}</span>
                    </div>
                </li>
            {{/recentReviews}}
            {{^recentReviews}}<li class="cg-empty">아직 후기가 없네요.</li>{{/recentReviews}}
        </ul>
    </section>

    {{#isLoggedIn}}
        <a href="/cafes/new"  class="cg-btn-outline">카페 등록</a>
    {{/isLoggedIn}}

</main>

{{>layout/footer}}
